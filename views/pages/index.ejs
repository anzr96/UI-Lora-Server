<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">

<!-- begin::Head -->

<head>
		<% include ../partials/head %>
		
</head>

<!-- end::Head -->

<!-- begin::Body -->

<body style="background-image: url(/static/assets/app/media/img/bg/bg-7.jpg)"
	class="m-page--fluid m-page--loading-enabled m-page--loading m-header--fixed m-header--fixed-mobile m-footer--push m-aside--offcanvas-default">

	<!-- begin::Page loader -->
	<div class="m-page-loader m-page-loader--base">
		<div class="m-blockui">
			<span>Please wait...</span>
			<span>
				<div class="m-loader m-loader--brand"></div>
			</span>
		</div>
	</div>

	<!-- end::Page Loader -->

	<!-- begin:: Page -->
	<div class="m-grid m-grid--hor m-grid--root m-page">

		<!-- begin::Header -->
		<% include ../partials/header %>

		<!-- end::Header -->

		<!-- begin::Body -->
		<div class="m-grid__item m-grid__item--fluid  m-grid m-grid--ver-desktop m-grid--desktop m-page__container m-body">
			<div class="m-grid__item m-grid__item--fluid m-wrapper">

				<!-- BEGIN: Subheader -->
				<div class="m-subheader ">
					<div class="d-flex align-items-center">
						<div class="mr-auto">
							<h3 class="m-subheader__title ">Dashboard</h3>
						</div>
						<div>
							<span class="m-subheader__daterange" id="m_dashboard_daterangepicker">
								<span class="m-subheader__daterange-label">
									<span class="m-subheader__daterange-title"></span>
									<span class="m-subheader__daterange-date m--font-brand"></span>
								</span>
								<a href="#" class="btn btn-sm btn-brand m-btn m-btn--icon m-btn--icon-only m-btn--custom m-btn--pill">
									<i class="la la-angle-down"></i>
								</a>
							</span>
						</div>
					</div>
				</div>

				<!-- END: Subheader -->
				<div class="m-content">

					<!--Begin::Section-->
					<div class="row">
						<div class="col-xl-12">
							<!--begin:: Widgets/Top Products-->
							<div class="m-portlet">
								<div class="m-portlet__body m-portlet__body--no-padding">
									<div class="row m-row--no-padding m-row--col-separator-xl">
										<div class="col-md-12 col-lg-12 col-xl-4">

											<!--begin:: Widgets/Stats2-1 -->
											<div class="m-widget1">
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title">Total Nodes</h3>
															<span class="m-widget1__desc">Total LoRa nodes that connected</span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-brand"><%= total_nodes %></span>
														</div>
													</div>
												</div>
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title">Total Sensors</h3>
															<span class="m-widget1__desc">Total Sensors that connect on LoRa nodes</span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-danger"><%= total_sensors %></span>
														</div>
													</div>
												</div>
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title"></h3>
															<span class="m-widget1__desc"></span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-success"></span>
														</div>
													</div>
												</div>
											</div>

											<!--end:: Widgets/Stats2-1 -->
										</div>
										<div class="col-md-12 col-lg-12 col-xl-4">

											<!--begin:: Widgets/Stats2-2 -->
											<div class="m-widget1">
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title">Total Users</h3>
															<span class="m-widget1__desc">Total Users in Web App LoRa</span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-accent"><%= total_users %></span>
														</div>
													</div>
												</div>
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title">Total Online Users</h3>
															<span class="m-widget1__desc">Total Online Users on Web App LoRa</span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-info"><%= total_users %></span>
														</div>
													</div>
												</div>
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title"></h3>
															<span class="m-widget1__desc"></span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-warning"></span>
														</div>
													</div>
												</div>
											</div>

											<!--begin:: Widgets/Stats2-2 -->
										</div>
										<div class="col-md-12 col-lg-12 col-xl-4">

											<!--begin:: Widgets/Stats2-3 -->
											<div class="m-widget1">
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title"></h3>
															<span class="m-widget1__desc"></span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-success"></span>
														</div>
													</div>
												</div>
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title"></h3>
															<span class="m-widget1__desc"></span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-danger"></span>
														</div>
													</div>
												</div>
												<div class="m-widget1__item">
													<div class="row m-row--no-padding align-items-center">
														<div class="col">
															<h3 class="m-widget1__title"></h3>
															<span class="m-widget1__desc"></span>
														</div>
														<div class="col m--align-right">
															<span class="m-widget1__number m--font-primary"></span>
														</div>
													</div>
												</div>
											</div>

											<!--begin:: Widgets/Stats2-3 -->
										</div>
									</div>
								</div>
							</div>
							<!--end:: Widgets/Top Products-->
						</div>
					</div>

					<!--End::Section-->

					<!--Begin::Section-->
					<div class="row">
						<div class="col-xl-12">
							<div class="m-portlet m-portlet--mobile" aria-label="/#nodesinfo">
								<div class="m-portlet__head">
									<div class="m-portlet__head-caption">
										<div class="m-portlet__head-title">
											<h3 class="m-portlet__head-text">
												Nodes Info
											</h3>
										</div>
									</div>
									<div class="m-portlet__head-tools">
										<ul class="m-portlet__nav">
											<li class="m-portlet__nav-item">
												<a href="" class="m-portlet__nav-link m-portlet__nav-link--icon"><i class="la la-close"></i></a>
											</li>
											<li class="m-portlet__nav-item">
												<a href="" class="m-portlet__nav-link m-portlet__nav-link--icon"><i class="la la-refresh"></i></a>
											</li>
										</ul>
									</div>
								</div>
								<div class="m-portlet__body">
									<table id="m_table_1" class="table table-striped- table-bordered table-hover responsive"  role="grid" aria-describedby="m_table_1_info" style="width: 100%;">
										<thead>
											<tr>
												<th>ID</th>	
												<th>Device Address</th>
												<th>Tempreture</th>
												<th>Light</th>
												<th>Online</th>
											</tr>
										</thead>
										<tbody>
										
											<% nodes.forEach(function(node) { %>
												<tr>
													<td><%= node.id %></td>
													<td><%= node.devaddr %></td>
													<td><%= node.temp %></td>
													<td><%= node.light %></td>
													<td><% if (node.online) { %>
														<span class="m-badge m-badge--accent m-badge--dot"></span>
														&nbsp;
														<span class="m--font-bold m--font-accent">Online</span>
														<% } else {%>
														<span class="m-badge m-badge--danger m-badge--dot"></span>
														&nbsp;
														<span class="m--font-bold m--font-accent">Offline</span>
														<% } %>
													</td>
												</tr>
											<% }); %>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>

					<!--End::Section-->
				</div>
			</div>
		</div>

		<!-- end::Body -->

		<!-- begin::Footer -->
		<% include ../partials/footer %>
		
		<!-- end::Footer -->
	</div>

	<!-- end:: Page -->

	<!-- begin::Quick Sidebar -->
	<% include ../partials/sidebar %>

	<!-- end::Quick Sidebar -->

	<% include ../partials/foot %>

	<!--begin::Page Scripts -->
	<script src="/static/assets/app/js/dashboard.js" type="text/javascript"></script>

	<!--end::Page Scripts -->

	<!-- begin::Page Loader -->
	<script>
		$(window).on('load', function () {
			$('body').removeClass('m-page--loading');
		});
	</script>

	<script>
		$(document).ready(function(){
			$("#m_table_1").DataTable({
				responsive: true,
				ordering: true,
			});
		});
	</script>

	<!-- end::Page Loader -->
</body>

<!-- end::Body -->

</html>